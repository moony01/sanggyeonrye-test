# PLOZEN Supabase Naming Convention v1.0

## 1. 개요 (Overview)

본 문서는 PLOZEN의 단일 Supabase 프로젝트 내에서 다수의 시스템(PLOZEN 웹사이트, K-Pop 얼굴상 테스트 등)을 효율적으로 관리하기 위한 데이터베이스 네이밍 표준을 정의한다.

---

## 2. 핵심 전략 (Core Strategy)

- **Single Schema, Logical Separation**: `public` 스키마 내에서 **Prefix(접두사)**를 사용하여 시스템을 논리적으로 분리한다.
- **Supabase Optimization**: Supabase Client SDK 호환성을 극대화하기 위해 PostgreSQL의 Schema 분리 대신 Table Naming 규칙을 우선한다.

---

## 3. 네이밍 규칙 (Naming Rules)

### 3.1 기본 문법 (Syntax)

| 구분      | 규칙                                      | 예시                      |
| :-------- | :---------------------------------------- | :------------------------ |
| **Case**  | **snake_case** (소문자 + 언더스코어)      | `user_profiles`           |
| **Table** | **[Prefix]_[Context]_[Entity]s** (복수형) | `plz_portfolios`          |
| **PK**    | **id** (Bigint or UUID)                   | `id`                      |
| **FK**    | **[Target_Singular]\_id**                 | `user_id`, `portfolio_id` |

### 3.2 시스템별 접두사 (System Prefixes)

#### A. 공통 모듈 (System Core)

- **Prefix**: `sys_`
- **용도**: 인증, 결제, 로그 등 전사 공통 데이터
- **예시**: `sys_profiles`, `sys_payments`

#### B. PLOZEN 공식 웹사이트 (Corporate & Solution Portal)

- **Prefix**: `plz_`
- **용도**: 포트폴리오, 문의, CMS 데이터
- **예시**: `plz_portfolios`, `plz_inquiries`

#### C. K-Pop 얼굴상 테스트 (Service App)

- **Prefix**: `kft_`
- **용도**: AI 분석 결과, 이미지 업로드, 아티스트 데이터, 댓글, 좋아요, 공유,
- **예시**: `kft_results`, `kft_uploads`

---

## 4. DDL 예시 (Implementation)

```sql
-- [공통] 사용자 프로필
CREATE TABLE public.sys_profiles (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  nickname TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- [플로젠 웹] 포트폴리오
CREATE TABLE public.plz_portfolios (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  title TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- [K-Pop] 분석 결과
CREATE TABLE public.kft_results (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES public.sys_profiles(id),
  score NUMERIC(5, 2),
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```
